import { useRef, Fragment } from 'react'
import { Meta, Story, Canvas } from '@storybook/addon-docs'
import { useFocusWithArrows, useFocus, Button } from '@amsterdam/asc-ui'

<Meta title="Utils/useFocusWithArrows hook" component={useFocusWithArrows} />

# useFocusWithArrows hook

Focus on children with arrow keys and home / end buttons.

_Note:_ these only work in the "Canvas" view

## Default

<Canvas>
  <Story name="Default">
    <Fragment>
      {(() => {
        const ref = useRef()
        useFocus(ref)
        const { keyDown } = useFocusWithArrows(ref)
        return (
          <div
            role="button"
            tabIndex={-1}
            onKeyDown={keyDown}
            ref={ref}
            style={{ display: 'flex', flexDirection: 'column', width: '200px' }}
          >
            <p>Press keys up, down, home or end to focus on the buttons</p>
            <Button>One</Button>
            <Button>Two</Button>
            <Button>Three</Button>
          </div>
        )
      })()}
    </Fragment>
  </Story>
</Canvas>

## With rotating option

Jump to first item from last or vice versa

<Canvas>
  <Story name="With rotating option">
    <Fragment>
      {(() => {
        const ref = useRef()
        useFocus(ref)
        const { keyDown } = useFocusWithArrows(ref, true)
        return (
          <div
            role="button"
            tabIndex={-1}
            onKeyDown={keyDown}
            ref={ref}
            style={{ display: 'flex', flexDirection: 'column', width: '200px' }}
          >
            <p>Press keys up, down, home or end to focus on the buttons</p>
            <Button>One</Button>
            <Button>Two</Button>
            <Button>Three</Button>
          </div>
        )
      })()}
    </Fragment>
  </Story>
</Canvas>

## With directChildrenOnly option

Useful if you don't want to focus on other focussable elements inside the child components of the ref

<Canvas>
  <Story name="With directChildrenOnly option">
    <Fragment>
      {(() => {
        const ref = useRef()
        useFocus(ref)
        const { keyDown } = useFocusWithArrows(ref, true, true)
        return (
          <div
            role="button"
            tabIndex={-1}
            onKeyDown={keyDown}
            ref={ref}
            style={{ display: 'flex', flexDirection: 'column', width: '200px' }}
          >
            <p>Press keys up, down, home or end to focus on the buttons</p>
            <Button>One</Button>
            <Button>Two</Button>
            <div>
              <Button>
                I&apos;m nested and I should not get focus from arrow keys
              </Button>
            </div>
          </div>
        )
      })()}
    </Fragment>
  </Story>
</Canvas>
