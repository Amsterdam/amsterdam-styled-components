import { Meta, Story, Preview } from '@storybook/addon-docs/blocks'
import { action } from '@storybook/addon-actions'
import { SearchBar } from '@amsterdam/asc-ui'

export let searchText, setText
export const setupState = () => {
  ;[searchText, setText] = React.useState('')
}

<Meta title="UI/SearchBar" component={SearchBar} />

# SearchBar

Doesn't exist in Design System yet

**Component status: Experimental**

## Default

<Preview>
  <Story name="Default">
    <SearchBar
      placeholder="Enter the search text"
      onChange={(e) => {
        action(`text changed: ${e.target.value}`)(e)
      }}
    />
  </Story>
</Preview>

## With Focus

<Preview>
  <Story name="With Focus">
    <SearchBar placeholder="This will focus automatically" autoFocus />
  </Story>
</Preview>

## In A Form

<Preview>
  <Story name="In A Form">
    <form
      onSubmit={(e) => {
        e.preventDefault()
        action('Submitted')(e)
      }}
    >
      <SearchBar
        placeholder="Enter the search text"
        onChange={(e) => {
          action(`text changed: ${e.target.value}`)(e)
        }}
      />
    </form>
  </Story>
</Preview>

## Controlled State

<Preview>
  <Story name="Controlled State">
    <>
      {setupState()}
      <SearchBar
        placeholder="Enter the search text"
        onChange={(e) => {
          setText(e.currentTarget.value)
          action(`text changed: ${searchText}`)(e)
        }}
        onClear={(e) => {
          action('Cleared')(e)
          setText('')
        }}
        onSubmit={(e) => {
          action(`button clicked: ${searchText}`)(e)
        }}
        value={searchText}
      />
      <p>
        <span>Searching for:</span>
        {searchText}
      </p>
    </>
  </Story>
</Preview>
