import { Meta, Story, Preview } from '@storybook/addon-docs/blocks'
import { SearchBar } from '@amsterdam/asc-ui'

export let searchText, setText
export const setupState = () => {
  ;[searchText, setText] = React.useState('')
}

<Meta title="UI/SearchBar" component={SearchBar} />

# SearchBar

Doesn't exist in Design System yet

**Component status: Experimental**

## Default

<Preview>
  <Story name="Default">
    <SearchBar
      placeholder="Enter the search text"
      onChange={() => {
        console.log('Input changed')
      }}
    />
  </Story>
</Preview>

## With Focus

<Preview>
  <Story name="With Focus">
    <SearchBar placeholder="This will focus automatically" autoFocus />
  </Story>
</Preview>

## In A Form

<Preview>
  <Story name="In A Form">
    <form
      onSubmit={(e) => {
        e.preventDefault()
        console.log('Submitted')
      }}
    >
      <SearchBar
        placeholder="Enter the search text"
        onChange={() => {
          console.log('Input changed')
        }}
        onClear={() => {
          console.log('Cleared')
        }}
      />
    </form>
  </Story>
</Preview>

## Controlled State

<Preview>
  <Story name="Controlled State">
    <>
      {setupState()}
      <SearchBar
        placeholder="Enter the search text"
        onChange={(e) => {
          setText(e.currentTarget.value)
          console.log(`text changed: ${searchText}`)
        }}
        onClear={() => {
          console.log('Cleared')
          setText('')
        }}
        onSubmit={() => {
          console.log(`button clicked: ${searchText}`)
        }}
        value={searchText}
      />
      <p>
        <span>Searching for:</span>
        {searchText}
      </p>
    </>
  </Story>
</Preview>
